<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizzes GEM - V1.4 Profesional</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

    <div id="login-screen" class="container">
        <div class="brand">ğŸ® Quizzes GEM</div>
        <p>Tu plataforma de aprendizaje interactivo</p>
        <div class="login-box">
            <input type="text" id="user-name-input" class="modern-input" placeholder="Nombre de usuario">
            <input type="password" id="user-pass-input" class="modern-input" placeholder="ContraseÃ±a">
            <button id="btn-login-action" class="btn-main btn-purple">Acceder al Sistema</button>
        </div>
    </div>

    <div id="home-screen" class="container hidden">
        <header class="header-user">
            <div class="user-info">
                <span id="user-display">ğŸ‘¤ Cargando...</span>
            </div>
            <button id="btn-logout" class="btn-small">Cerrar SesiÃ³n</button>
        </header>
        
        <div class="main-layout">
            <section class="quizzes-column">
                <button id="btn-go-editor" class="btn-main btn-create">â• Crear Nuevo Proyecto</button>
                <div id="quiz-list-container">
                    <h3 class="section-title">Quizzes Disponibles</h3>
                    <div id="quiz-loading-status" class="loading-box">
                        <p class="loading-text">ğŸ›¡ï¸ Verificando seguridad de datos...</p>
                    </div>
                    <div id="quiz-list"></div>
                </div>
            </section>

            <aside class="ranking-column">
                <h3 class="section-title">ğŸ† SalÃ³n de la Fama</h3>
                <div id="global-ranking-list"></div>
                <div id="admin-controls" class="hidden admin-panel">
                    <button id="btn-reset-ranking" class="btn-reset-admin">â™»ï¸ Reset Global</button>
                </div>
            </aside>
        </div>
    </div>

    <div id="quiz-screen" class="container hidden">
        <div class="quiz-header">
            <h2 id="current-quiz-title">Cargando...</h2>
        </div>
        <div id="options-container"></div>
    </div>

    <div id="editor-screen" class="container hidden">
        <div class="editor-header">
            <h2>Crear Quiz</h2>
            <span id="questions-added-count" class="badge">0 preguntas</span>
        </div>
        
        <div class="editor-main-card">
            <div class="input-field">
                <input type="text" id="quiz-title-input" class="title-input" placeholder="TÃ­tulo del Quiz (Ej: ProgramaciÃ³n BÃ¡sica)">
            </div>

            <div class="question-frame">
                <div class="frame-label" id="q-number-display">Pregunta #1</div>
                <textarea id="q-text" class="question-textarea" placeholder="Escribe tu pregunta aquÃ­..."></textarea>
                
                <div class="options-container-editor">
                    <div class="correct-option-wrapper">
                        <span class="indicator-dot"></span>
                        <div id="correct-option-placeholder">
                            </div>
                    </div>
                    <div id="options-setup" class="incorrect-options-grid">
                        </div>
                </div>
                
                <button id="btn-add-option" class="btn-ghost">ï¼‹ AÃ±adir opciÃ³n incorrecta</button>
            </div>
            
            <div class="editor-footer-actions">
                <button id="btn-next-q" class="btn-secondary">ğŸ’¾ Guardar Pregunta</button>
                <button id="btn-save-quiz" class="btn-main btn-green">ğŸš€ Publicar Quiz</button>
            </div>
        </div>

        <div id="editor-preview-container" class="preview-panel hidden">
            <h4>Contenido del Quiz:</h4>
            <div id="editor-preview-list"></div>
        </div>

        <button id="btn-back-home" class="btn-link">â¬…ï¸ Cancelar y volver</button>
    </div>

    <div id="settings-screen" class="container hidden">
        <h2 id="settings-quiz-title">Gestionar Quiz</h2>
        <div class="settings-actions">
            <button id="btn-view-responses" class="btn-main btn-blue">ğŸ‘¤ Ver Participantes</button>
            <button id="btn-delete-quiz" class="btn-main btn-red">ğŸ—‘ï¸ Eliminar Quiz</button>
        </div>
        <button id="btn-settings-back" class="btn-link" style="margin-top:20px;">Volver al inicio</button>
    </div>

    <div id="responses-screen" class="container hidden">
        <h2>Puntuaciones</h2>
        <div id="responses-table"></div>
        <button id="btn-responses-back" class="btn-small">â¬…ï¸ Volver</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        const firebaseConfig = { apiKey: "TU_API_KEY", authDomain: "quizzesgem.firebaseapp.com", projectId: "quizzesgem", storageBucket: "quizzesgem.appspot.com", messagingSenderId: "...", appId: "..." };
        const app = initializeApp(firebaseConfig);
        window.db = getFirestore(app);
    </script>
    <script type="module" src="script.js"></script>
</body>
</html>